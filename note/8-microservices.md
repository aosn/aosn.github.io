---
layout: subpage
title: 読書ノート - マイクロサービスアーキテクチャ
---

[マイクロサービスアーキテクチャ](/workshop/8-microservices)の読書ノートです。

## 正誤表

討議事項が正誤表に記載されていることがあります。確認してください。

正誤表 (原著): [http://www.oreilly.com/catalog/errata.csp?isbn=0636920033158](http://www.oreilly.com/catalog/errata.csp?isbn=0636920033158)

## ノート

### 第1章

* マイクロサービスやってる？
  * HTTP で分けるというのはやっている (LagunaPresa)
  * Spring Boot 使ってる (mikan)

* OSGi・・・
  * 結局モジュール間は結合する (mikan)

* Netflex すごいよね
  * Chaos Monkey, Circuit Breaker...

### 第2章

* Heroku 12 factor 日本語版 [https://12factor.net/ja/](https://12factor.net/ja/)
  * 参考になる

* Graphite ・・・ログ収集
  * Graphana と組み合わせて使うと良い

* Nagios ・・・監視システム
* Dropwizard, Karyon ・・・マイクロコンテナ
* Hystrix ・・・サーキットブレーカー

### 第3章

* 完全に分離するか入れ子するか → 組織構造に基づいて設計
 * コンウェイの法則

* 最初はモノリシックに作って、ドメイン境界が安定してから切るべき
 * なんでもマイクロサービスで最初から設計すればいいというものではない

### 第4章

**P45** 「全体とは独立して変更やりリリースを」は「全体とは独立して変更やリリースを」誤り。

→ 要 Errata 報告

* コレオグラフィって日本語ですると何なんだ？
 * 振付師？？

* 分散トランザクション的なことをコレオグラフィで保証するのは難しそう

* サービスを跨ぐ DRY をどこまで寛大になるか
 * 本当に寛大になるべきなのか？投資対効果が悪い気がする
 * 依存性を複雑にするぐらいなら、だぶっててもいいという考え方だね
 * ドメインに依存しないものは積極的にライブラリ化したい

* CMS からプレゼンテーションを分離するのは面白い
 * CMS がどれだけ使いやすい API 提供いているかが鍵になりそう
 * CRM をファサードで隠すのも面白い

**P83** 6行目 「設計言語」は (デザイナー用語の)「デザイン言語」の誤訳ではないだろうか。

* バージョニング
  * 複数モジュールを変更するときに、無停止でやるのが難しい。v1/v2 とか分けるのは参考なる。

### 第5章

* DB 統合を避けるの、オーバーヘッドはどうするのか
  * レポートを出したいとき、メモリで Join するの限界がある

* Java の package がかなり劣っているとは・・・
  * public がパブリックすぎる問題、Java 9 の module である程度解消されるかな

* コードが取り残されるとは
  * リファクタリングしていくとドメインに収まらないコードが具現化される感じかな

* そもそもモノリス分割するってプロジェクトで決定するって相当なものだ
  * DB 分割の話重い・・・

* リードレプリカ (図5-12) このアーキテクチャ、経験ある

* トランザクションも難しい、レポーティングはスキーマ結合必至、マイクロサービスやるの心折れそうになる・・・
  * ドメイン境界が安定するまでモノリシックに作れという助言があるけど、トランザクション境界も安定するまで待ちたい

### 第6章

* CI してる？
  * 1日に１度はメインラインにチェックインしていますか？ :x::o::x::x::o::x:
  * 変更を検証するテストスイートはありますか？ :x::o::x::x::o::x:
  * ビルドが壊れたときに、それを修正するのがチームの最優先事項でしょうか？ :x::o::x::x::o::x:

* リポジトリキリすぎるデメリットもあるような
  * リポジトリ跨ぐ Issue が置いづらくなる (GitHub Isssues 使う場合とか)

* OS成果物がピンとこない
  * [Packger.io](https://packager.io/) とか使って成果物履き分けている OSS もある
 
 
### 参考情報
