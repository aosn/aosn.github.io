---
layout: subpage
title: 読書ノート - 現場で役立つシステム設計の原則
---

[現場で役立つシステム設計の原則](/workshop/12-principles)の読書ノートです。

## 正誤表

- [サポートページ：現場で役立つシステム設計の原則 〜変更を楽で安全にするオブジェクト指向の実践技法：｜技術評論社](http://gihyo.jp/book/2017/978-4-7741-9087-7/support)

## ノート

### 第1章

* **P24** リーダブルコードにもあるが、数値を定義するときは単位を含めたほうがベター (金額だったら円なのか銭なのかドルなのか)
* **P24** セミコロンの前のスペースとか if の条件式の前後のスペースとか一貫性のないスタイリングがすごい気になる
* **P24** `shippingCost()` に `// 送料を算出する` とコメントが添えられているが、こんなわかりきったコメントいらないのでは (Javadoc ならまだしも)
* **P30** 定数定義の書き方がここと P24 で違う (大文字スネークケース対キャメルケース)
* 値オブジェクト、こんなにオブジェクト作ったらパフォーマンスインパクトありそう
  * ドメイン駆動設計を実践する上では不可欠だが、ボトルネックになるならば分析した上でチューニングしたい
  * サーバーサイドなら札束で殴ればいいけど、組み込みでは限界ある
  * ファーストクラスコレクションのほうはオブジェクト数は +1 するだけなのでパフォーマンスインパクトはほとんどない
  * 値オブジェクトで DB (ORM) 絡むときは DB の型と値オブジェクトの相互変換のためのコンバーターを書く必要があり、ボイラープレート的に変換コードをゴリゴリ実装する必要がある

### 第2章

* **P51** 早期リターン、Scala では非推奨とか。
  * return 1個主義派の主張: Excel でフローチャートが書きやすい
  * [リーダブルコードの読書ノート](/note/4-readablecode)にも同様の議論あり
* **P53** 網羅性、相互独立性がコードからは俯瞰できないのがこのコードの怖いところ
* **P57** なんでセミコロンがあったりなかったりするのか :innocent: 誤植？
* **P65** `EnumSet.of` を使ってるのに `EnumMap` は使わないんだ・・・
* **P66** Enum のアプローチも良いけど Better Java などによくある型のパターンマッチで済ませることが多いかも (網羅性検査付き)
  * Go の型スイッチは網羅性チェックない・・・
  * Java だと `instanceof` は良くないものという認識があるが、C# とかだとナチュラルにやるな・・・動的型も部分的に持ち込んてるからでもある
